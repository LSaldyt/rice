{"version":3,"sources":["webpack:///webpack/bootstrap 072a31b12465057f48cd","webpack:///./node_modules/preact/dist/preact.js","webpack:///./src/lib/dom.js","webpack:///./src/lib/keys.js","webpack:///./node_modules/mosi/client.js","webpack:///./src/lib/browser_polyfill.js","webpack:///./node_modules/mosi/node.js","webpack:///./node_modules/webextension-polyfill/dist/browser-polyfill.js","webpack:///./src/lib/friendlyCodeStrings.json","webpack:///./src/client/interceptedEventTypes.js","webpack:///./src/client/gui.js","webpack:///./src/client/middleware.js","webpack:///./src/client/modes.js","webpack:///./src/modes/disabled/client.js","webpack:///./src/modes/command/client/commands/scroll/utils.js","webpack:///./src/modes/command/client/commands/scroll/index.js","webpack:///./src/modes/command/client/commands/navigation.js","webpack:///./src/lib/msg.js","webpack:///./src/modes/command/client/commands/misc.js","webpack:///./src/modes/command/client/commands/index.js","webpack:///./src/modes/command/client/trie.js","webpack:///./src/modes/command/client/index.js","webpack:///./src/modes/pass/trie.js","webpack:///./src/modes/pass/client.js","webpack:///./src/modes/hints/client/activate.js","webpack:///./src/modes/hints/client/findHints.js","webpack:///./src/modes/hints/client/HintRenderer.js","webpack:///./src/modes/hints/client/video.js","webpack:///./src/modes/hints/client/index.js","webpack:///./src/lib/trie.js","webpack:///./src/modes/command/client/commands/hint.js","webpack:///./src/modes/command/client/commands/tab.js","webpack:///./src/modes/command/client/commands/clipboard.js","webpack:///./src/modes/text/client.js","webpack:///./src/client/index.js","webpack:///./node_modules/smoothscroll-polyfill/dist/smoothscroll.js","webpack:///./src/content_script/index.js"],"names":[],"mappings":"YACA,cAMA,IACA,iBAGA,mBACA,CACA,IACA,KAIA,2CAGA,aAGA,OACA,OAIA,IAzBA,eA4BA,MAGA,uBACA,GACA,kCACA,CACA,gBACA,cAGA,OAGA,iBACA,YACA,qBAA2B,UAA0B,UACrD,YAAiC,CAAe,QAChD,EAEA,aADA,QAIA,mBAAsD,wCAA+D,SAGrH,MAGA,8BC7DA,cACA,CACA,IAAC,kBACD,kBACA,MACA,gBACA,kBACA,yBACA,GACA,gBACA,aACA,kBAAkC,OAAS,cAC3C,uBACA,+BACA,mBAEA,2DAA+F,OAAK,YAAwB,6BAC5H,kBACA,8BACA,yBACA,mBACA,QAGA,8BACA,MAEA,kBADA,UAEA,gBACA,0BACA,KACA,QACA,cACA,OACA,QACA,gBACA,0BAA2C,MAAqB,kBAChE,MACA,QACA,cACA,mBACA,QACA,cACA,iBACA,QACA,cACA,OACA,kBACA,cACA,KAEA,MACA,QACA,kBAIA,eACA,uBACA,6BAAqD,iFACrD,EAAkB,WAAoB,sCACtC,aACA,UACA,WACA,CACA,cACA,4CACA,wBACA,aACA,OACA,QACA,0BACA,IACA,cACA,YACA,oDACA,OACA,gBACA,wBACA,KACA,gBACA,yBACA,oDACA,wFACA,WACA,gBACA,kDACA,IACA,cACA,WACA,yBACA,0BACA,sDACA,MACA,QACA,cACA,SACA,gBACA,cACA,sBACA,wBACA,gDACA,gBAA6B,wCAAmE,WAChG,sDACA,0BACA,6CACA,0DACA,cACS,UACT,wDACS,iCACT,wBACA,+BAEA,sCACa,wCACb,MACA,MAAS,qCACT,qBACA,2BACS,uBACT,kBACA,0FAAkI,OAAiC,qGAAiJ,SACpT,kBACA,CACA,kBACA,IACA,CACA,MAAS,UACT,CACA,cACA,2CACA,YACA,cACA,IACA,0BACA,sCACA,qCACA,4BACA,OACA,CACA,gBACA,qGACA,kBAEA,SADA,sBAEA,aACA,QACA,OACA,uBACA,qCAEA,mBACA,wBACA,CACA,sBACA,uBAEA,eACA,WAMA,8BALA,eACA,SACA,MAEA,MAEA,oBACA,yCACA,YACA,sBACA,IACA,KAQA,+BAPA,8BAEA,iBACA,gBAEA,4CAGA,4CACA,yBACA,4BAAwD,uBACxD,OACA,qCACA,uCACA,kBACA,IACA,sBACA,WACA,MACA,gCAAsD,OAAK,uBAC3D,KACA,CAOA,2EANA,8CACS,oCACT,+BACA,oBACA,UACA,KAEA,sBACA,iCAA6F,mCAC7F,sBAAgC,EAAS,QACzC,6DACA,KACA,yCAGA,SAFA,IACa,OAEb,gBAAiC,EAAU,QAC3C,GACA,OACA,aACA,OACA,WACA,WACA,cACA,GAEa,yBAAoD,IAAiB,IAClF,SACA,eACA,CACA,aACA,YACA,WACA,IACA,KAEA,GACA,6BAA6E,mBAC7E,qBACA,6BAEA,OACA,6BACA,WACA,UACA,QAEA,IACA,gBACA,SACA,oBAAiE,QACjE,0BACA,SACA,YACA,kBACA,MACA,CACA,kBAEA,2DACA,8HACA,OACA,cACA,4BACA,SAAuC,aACvC,GACA,kBACA,wBACA,WACA,0BAA2C,OAAK,6BAChD,iBACA,oBACA,GACA,KACA,CACA,QACA,sBACA,GACA,uBACA,4BACA,8BACA,OACA,gCACa,oDACb,wCACA,2CACA,WAEA,wCACA,SACA,oBACA,qDACA,SAD8I,iBAG9I,SACA,oBACA,gBACA,mIAEA,oBACA,UACA,UACA,iFAA8I,2BAC9I,6BACA,UACA,UAEA,4DACA,eACA,KACA,oBACA,8CACA,4BACA,sBACA,iBACA,OACA,KACA,+CACA,MACA,MACA,sBACA,cACA,qBACA,mBACA,cAEA,QACA,IACA,KACA,KACA,uBACA,UACA,0BACA,uCAGA,uBACA,SACA,cACA,UACA,kBACA,kBACA,KAGA,MACA,WACA,SACA,aACA,aACA,gCACA,SACA,uCACA,WACA,CACA,SAAiE,WACjE,6BACA,2CAEA,0BACA,wCACA,cACA,GACA,CACA,oBACA,mFACA,wDACA,SAqBA,oBApBA,mBACA,WAEA,UACA,UACA,OAEA,YACA,oBACA,aACA,aAEA,YACA,WACA,QACA,qBACA,KAGA,QAEA,gBACA,oBACA,yBACA,iBACA,4BACA,8BACA,aACA,gBAAmD,iBACnD,0BACA,QAEA,eACA,KAEA,aACA,sBACA,GACA,kBACA,+BACA,qBACA,gBACA,cACA,OACA,eACA,0BACA,SACA,IAIA,MACA,KACA,KACA,kBACA,sBACA,cACA,yCACA,yBACA,GACA,OAAK,EACL,WACA,kCACA,2CACA,SACA,eACA,cACA,cACA,OACA,WACA,eACA,aACA,eACA,aACA,YACA,aACA,UACA,QACA,UACA,gBACA,SACA,SACA,OAEA,KACA,MACA,QACA,QACA,OACA,SACA,SAEA,GACA,KACA,KACA,OACA,KACA,KACA,EACA,mBACA,wBACA,iCACA,2CACA,UACA,wBACA,YACA,sCACA,wBACA,+DACA,UACA,KACA,wBACA,QACA,EACA,oBAEA,MACA,MACA,0BA1aA,0FACA,SACA,IAyaA,cACA,sBAxEA,OAAoC,WACpC,IACA,IAuEA,aACA,SACA,iCCtc8B,aAC5B,IAAI,EAAQ,UAAY,EAAQ,SAChC,gBAAQ,EACN,MACA,gBACA,WACA,aACA,YACA,UACA,aACA,eACA,WACE,MAEJ,UACD,QAED,CAMgB,WAAmB,EAAO,SACxC,MAAM,GAAgB,EACtB,cAAM,EAA0B,GAAiB,EACjD,iBAAO,GAGR,MAED,KArDgC,WAC9B,CAAI,KACF,QAAQ,EACN,cACE,cACF,UACA,eACE,SAEJ,UACE,eACA,MADK,KAAQ,gBAAgB,kBAE3B,aADG,KAAQ,KAGhB,UACD,CACD,QAED,YA0CqC,aAAqB,KACxD,IAEE,GACE,YAEF,yCACE,cAEF,wCACE,YAGJ,uDAAO,QAAQ,KACb,MAAM,GAAQ,GAAe,gBAC3B,CACA,WACA,mBACA,cAGF,SACD,gBACF,EAED,MAcoC,WAG9B,cAIL,oBAuBD,MAIsB,WACpB,MAAM,GAAW,SAAS,cAC1B,cAAS,MACT,2BACA,iBAAS,KACT,iBACA,kBAAS,YACT,iBAAS,KACV,cAED,MAMgB,UACd,MAAM,GAAW,SAAS,cAC1B,cAAS,MACT,kCAAS,KACT,iBACA,iBAAS,YACT,cAAM,GAAQ,EACd,MAED,gBAFU,KACT,gBAGF,MAC4C,mBAC1C,MAAM,GAAM,IAAI,gBACd,GAAI,MAAK,CAAC,KAAe,YAAQ,KAAM,IACrC,MAGJ,8CAAM,SAAQ,UAAU,SACtB,CACA,MACA,WAEH,W,qKArLD,EAiGO,KACL,GAE0D,yBAC5D,oCC1DyB,aACvB,MAAM,CAAY,WAAY,UAAW,SACzC,aAAQ,SAAE,EAAI,IAAS,KAAE,EAAI,IAAS,KAAE,EAAI,IAAS,KAAE,EAAI,IAAS,EACrE,EAED,CAuBiC,aAC/B,MAAM,CAAY,WAAY,UAAW,SACzC,aAAQ,SAAE,EAAI,SAAc,KAAE,EAAI,QAAa,KAAE,EAAI,OAAY,KAAE,EAC/D,QACG,EACR,EAED,CAI0C,aACxC,MAAM,CAAW,UAAW,SAC5B,aAAQ,SAAE,EAAI,QAAa,KAAE,EAAI,OAAY,KAAE,EAAI,QAAa,EACjE,EAED,KAvEmD,aACjD,CACA,IACD,GAED,MAK+B,WAC7B,QAAQ,EACN,SACA,YACA,cACA,UACE,OACF,SACE,QAEL,UAED,MAkBE,WACe,IACM,IAErB,OACK,MAAwB,QAAG,EAAW,IADpC,GAGA,KAAE,EAAU,GACZ,MAAwB,QAAG,EAAU,GAC7C,EAED,MA2BE,WACe,IACM,IAErB,OACK,MAAgC,OAAE,IAAoB,EAAM,MAC3D,IAAoB,EAAM,MAAM,MAChC,EAAW,IAHV,GAKA,KAAE,EAAU,GACZ,MAAyC,OAAE,EAAU,GAC7D,EAED,MAKoC,WAClC,OACE,IACA,EAAM,KACe,QAArB,QAAO,GAAM,KACb,EAAM,MACgB,QAAtB,QAAO,GAAM,OACZ,CAAC,EAAM,eAAe,aACpB,EAAM,UAAsC,SAA1B,QAAO,GAAM,YACjC,CAAC,EAAM,eAAe,YACpB,EAAM,SAAoC,SAAzB,QAAO,GAAM,WAChC,CAAC,EAAM,eAAe,WACpB,EAAM,QAAkC,SAAxB,QAAO,GAAM,UAC/B,CAAC,EAAM,eAAe,YACpB,EAAM,SAEZ,SAFuB,QAAO,GAAM,QAIrC,MAKgB,SACd,CACA,MACA,OACA,UACA,SACA,UACA,WAPwB,UASxB,OACE,CACA,MACA,OACA,UACA,SACA,UACA,WAEH,S,kBAzJD,KAEO,KAAM,GAAgD,CAAC,CAAzC,aAAU,WAAW,QAAQ,OAA3C,MAEP,GACA,MAEA,2GCP8C,GAC9C,mBACA,cACA,UACA,gBACA,iCACA,gBAAkB,wEAAkG,wBACpH,MACA,oBACA,qBACA,eACA,iBACA,oBACA,0BAKA,qDACA,WACA,YACA,EACA,mBACA,MAAa,6BAA+C,gBAC5D,OAA8B,qBAAuB,oBACrD,2CACA,mDACA,yDACA,gBAOA,oBACA,CACA,6BAEA,wBACA,+BAA+B,wBAE/B,QACA,iCACA,IACA,OAAgB,mBAChB,qBAAO,SACP,OAAgB,MAChB,IACA,CACA,gDACA,2BACA,+BACA,iCAA6B,oCAC7B,WAMA,0BACA,MACA,8BACA,mBAEA,gDACA,+BACA,oBAQA,wBAA6B,sCAAqC,SAClE,CACA,cACA,oBACA,oBACA,qBACA,UACA,oBACA,sBACA,6BACA,IACA,eACA,uCAAmD,oCACnD,OAA2B,SAAY,CACvC,CAAyB,cACzB,IACA,eACA,uCAAmD,wCAAkD,CACrG,MAA2B,SAAY,CACvC,CACA,GACA,UACA,oBACA,mCACA,cACA,MACA,sBAAyD,kCAGzD,KACA,CACA,EACA,QACA,UACA,SACA,QACQ,oBC5GN,GACD,kBCHD,qBAwBA,IAvBA,KACA,cACA,UACA,OACA,kCACA,gBACA,qBACA,aACA,kBAA8B,gBAC9B,cACA,KAEA,4BAFgC,oBAChC,UAEA,uBAEA,cAEA,sBACA,0BACA,mBAEA,gBACA,CACA,GAkBA,IAjBA,KACA,cACA,6BACA,cACA,WAAoB,WACpB,oBAA2C,0BAC3C,GACA,wBACA,UACA,mBACA,yBACA,sBAA+D,KAC/D,eAAmC,MAAgB,SAAS,MAAY,MAAU,QAAa,WAAa,QAAQ,kBAAc,kBAAoC,gCAA4B,0CAAkE,+BACpQ,gBACA,MAAyB,CACzB,CACA,CACA,eCrCA,aAEA,+BAMA,gBA80BA,KAxTA,wBACA,wBACA,CACA,cACA,YAEA,OACA,aACA,wBAGA,qBACA,MAUA,UACA,4BAyBA,4BACA,aACA,gBACA,kCACS,WACT,yBAEA,MAEA,UAsBA,WACA,8BAEA,mCACA,e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,oBACA,YACA,mBACA,qBAGA,uBAGA,YACA,oBAEA,sBAIA,6BACA,qBAQA,cACA,IACA,GACA,EAEA,EACA,OAGA,mBACA,KACA,mBACA,8BACA,YACA,EACO,2DAEP,QAGA,aADA,MAQA,cACA,IAEA,GACA,EACA,IAHA,WAMA,mBAGA,MAEA,uBACA,4BAEA,0BAGA,gCACA,8BAEA,UASA,kBACA,IACA,GACA,EACA,EACA,IAGA,UACA,MACA,mBACA,2BACA,gBAEA,SACA,QACA,eACA,UAIA,OACA,CACA,aACA,SACA,YACA,SACA,SACA,IAEA,KAOA,2CAxKA,+BACA,UAKA,MACA,oBACA,oBACA,8BACA,qCAMA,+CACA,+CAQA,kCAiJA,oBACA,kBAEA,oCACA,+BAMA,WAEA,SACA,oBACA,oBAEA,IAGA,uBAEA,oBACA,oBAEA,oCACA,+BAMA,WAEA,SACA,uCACA,8CAEA,aAGA,oDAEA,gBACA,IAQA,uBAPA,KACA,kCACA,+BAEA,uBAIA,oBAGA,MACA,KACA,KACA,+BACA,qCAEA,UAGA,iCACA,iBAEA,GACA,+BACA,kBACA,0BACA,qBAGA,gBACA,YACA,sCAGA,GAGA,uCAEA,gBACA,IAQA,6BAPA,KACA,sCAEA,YAKA,UACA,+BAEA,8BAEA,gBAeA,QACA,WACA,aAGA,cAnBA,KAEA,6BACA,yBAGA,gBACA,QACA,WACA,aAIA,WAOA,EAIA,WAAsB,CAKtB,WAAC,iICrUD,IAEA,YAAW","file":"content_script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 072a31b12465057f48cd","!function(global, factory) {\n    'object' == typeof exports && 'undefined' != typeof module ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var children, lastSimple, child, simple, i;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !0 && child !== !1) {\n            if ('number' == typeof child) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                (children || (children = [])).push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children || EMPTY_CHILDREN);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else return;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent && void 0 !== parent.ownerSVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var ref = vnode && vnode.attributes && vnode.attributes.ref;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text && dom.parentNode) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll, !!props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        if (ref) (props.ref = ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, absorb) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || absorb || props || _child instanceof Text) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if (!(attrs && name in attrs) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        if (attrs) for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/preact/dist/preact.js\n// module id = 0\n// module chunks = 0 1 2 4","/**\n * Given a DOM element, returns true if you can edit it with key presses or\n * if the element is of a type that should handle its own keypresses\n * (e.g. role=application for google docs/sheets)\n * TODO: work on case sensitivity\n * consider all the possible cases\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nexport function isTextEditable (element) {\n  if (element) {\n    switch (element.nodeName) {\n      case 'INPUT':\n        return isEditableHTMLInput(element)\n      case 'TEXTAREA':\n      case 'OBJECT':\n        return true\n    }\n    switch (true) {\n      case element.contentEditable.toUpperCase() === 'TRUE':\n      case element.role === 'application':\n        return true\n    }\n  }\n  return false\n}\n\n/**\n * Returns whether the passed HTML input element is editable\n * @param {HTMLInputElement} element\n */\nfunction isEditableHTMLInput (element) {\n  if (element.disabled || element.readonly) return false\n  switch (element.type) {\n    case undefined:\n    case 'text':\n    case 'search':\n    case 'email':\n    case 'url':\n    case 'number':\n    case 'password':\n    case 'date':\n    case 'tel':\n      return true\n  }\n  return false\n}\n\n/**\n * Like document.activeElement, but penetrates through Shadow DOM\n * A good example is: https://web.archive.org/web/20170621214451/https://material.io/icons/\n * Click on the input. document.activeElement is different from deepActiveElement()\n * @param {HTMLElement} root\n */\nexport function deepActiveElement (root = document) {\n  const activeElement = root.activeElement\n  const activeElementShadowRoot = activeElement && activeElement.shadowRoot\n  return activeElementShadowRoot\n    ? deepActiveElement(activeElementShadowRoot)\n    : activeElement\n}\n\n/**\n * Dispatch a mouse event to the target element\n * based on cVim's implementation\n * @param {HTMLElement} element\n * @param {'hover' | 'unhover' | 'click'} type\n * @param {{ ctrlKey, shiftKey, altKey, metaKey }} modifierKeys\n */\nexport function mouseEvent (element, type, modifierKeys = {}) {\n  let events\n  switch (type) {\n    case 'hover':\n      events = ['mouseover', 'mouseenter', 'mousemove']\n      break\n    case 'unhover':\n      events = ['mousemove', 'mouseout', 'mouseleave']\n      break\n    case 'click':\n      events = ['mouseover', 'mousedown', 'mouseup', 'click']\n      break\n  }\n  events.forEach(type => {\n    const event = new MouseEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      view: window,\n      detail: 1, // usually the click count\n      ...modifierKeys\n    })\n    element.dispatchEvent(event)\n  })\n}\n\n/**\n * TODO: use standard fullscreenchange event when browsers support it\n */\nexport const fullscreenchange =\n  SAKA_PLATFORM === 'chrome'\n    ? 'webkitfullscreenchange'\n    : SAKA_PLATFORM === 'firefox' ? 'mozfullscreenchange' : 'fullscreenchange'\n/**\n * Given a DOM event type that is vendor pre-fixed, e.g. 'mozfullscreenchange',\n * converts it to a standardized event type, e.g. 'fullscreenchange'\n * TODO: remove this if no vendor-prefixed events are needed\n * @param {string} event\n * @returns {string}\n */\nexport function normalizeEventType (type) {\n  switch (type) {\n    case fullscreenchange:\n      return 'fullscreenchange'\n    default:\n      return type\n  }\n}\n\n// TODO: figure out why elements within shadow roots aren't registered as\n// visible/clickable, then start using this method\n/**\n * Given an HTML Element, returns a list of all elements within\n * penetrating the shadow DOM\n * @param {HTMLElement} root\n */\nexport function getAllElementsIncludingShadowDOM (root = document) {\n  const allElements = root.querySelectorAll('*')\n  let shadowDescendents = []\n  allElements.forEach(element => {\n    if (element.shadowRoot) {\n      shadowDescendents = [\n        ...shadowDescendents,\n        ...getAllElementsIncludingShadowDOM(element.shadowRoot)\n      ]\n    }\n  })\n  return [...allElements, shadowDescendents]\n}\n\n/**\n * Copies the specified text to the clipboard\n * @param {string} text\n */\nexport function copy (text) {\n  const textArea = document.createElement('textarea')\n  textArea.style = 'position:fixed;right:0'\n  textArea.value = text\n  document.body.appendChild(textArea)\n  textArea.select()\n  document.execCommand('Copy')\n  document.body.removeChild(textArea)\n}\n\n/**\n * Returns the clipboard contents.\n * This method is only callable from the background page and requires\n * the \"clipboardRead\" permission to be declared in manifest.json\n * @returns {string}\n */\nexport function paste () {\n  const textArea = document.createElement('textarea')\n  textArea.style = 'position:fixed;right:0'\n  document.body.appendChild(textArea)\n  textArea.focus()\n  document.execCommand('Paste')\n  const value = textArea.value\n  document.body.removeChild(textArea)\n  return value\n}\n\n/** Saves the given object to a human-readable JSON file */\nexport async function downloadJSON (object, filename) {\n  const url = URL.createObjectURL(\n    new Blob([JSON.stringify(object, null, 2)], {\n      type: 'data:application/json;charset=utf-8'\n    })\n  )\n  await browser.downloads.download({\n    url,\n    filename,\n    saveAs: true\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/dom.js","import friendlyCodeStrings from './friendlyCodeStrings.json'\n\nexport const isMac = navigator.appVersion.indexOf('Mac') !== -1\n\nlet _physicalKeys = true\nlet _ignoreModifierKeys = false\n\n/**\n * Configure how keyboard bindings should be interpreted and displayed\n * Options:\n * 1. physicalKeys = false: use event.code + modifierKeys\n * 2. physicalKeys = true && ignoreModifierKeys = false: use event.key + modifierKeys\n * 3. physicalKeys = true && ignoreModifierKeys = true: use event.key\n * @param {boolean} physicalKeys_\n * @param {boolean} ignoreModifierKeys_\n */\nexport function setKeyboardSettings (physicalKeys, ignoreModifierKeys) {\n  _physicalKeys = physicalKeys\n  _ignoreModifierKeys = ignoreModifierKeys\n}\n\n/**\n * Returns true if the given keyboard event is ONLY a modifier key, false otherwise\n * @param {KeyboardEvent} event\n * @returns {boolean}\n */\nexport function isModifierKey (event) {\n  switch (event.key) {\n    case 'Shift':\n    case 'Control':\n    case 'Alt':\n    case 'Meta':\n      return true\n    default:\n      return false\n  }\n}\n\n/**\n * Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction modifierString (event) {\n  const { shiftKey: s, ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${s ? 's' : ''}${c ? 'c' : ''}${a ? 'a' : ''}${m ? 'm' : ''}`\n}\n\n/**\n * Converts a KeyboardEvent to its string representation use for internal processing\n * @param {KeyboardEvent} event\n * @param {boolean} physicalKeys\n * @param {boolean} ignoreModifierKeys\n * @returns {string}\n */\nexport function keyboardEventString (\n  event,\n  physicalKeys = _physicalKeys,\n  ignoreModifierKeys = _ignoreModifierKeys\n) {\n  return physicalKeys\n    ? `${modifierString(event)}_${event.code}`\n    : ignoreModifierKeys\n      ? `${event.key}`\n      : `${modifierString(event)}_${event.key}`\n}\n\n/** Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction friendlyModifierString (event) {\n  const { shiftKey: s, ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${s ? 'shift-' : ''}${c ? 'ctrl-' : ''}${a ? 'alt-' : ''}${m\n    ? 'meta-'\n    : ''}`\n}\n\n/** Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction friendlyShiftlessModifierString (event) {\n  const { ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${c ? 'ctrl-' : ''}${a ? 'alt-' : ''}${m ? 'meta-' : ''}`\n}\n\n/** Converts a KeyboardEvent to a user-friendly string representation.\n * @param {KeyboardEvent} event\n * @param {boolean} physicalKeys\n * @param {boolean} ignoreModifierKeys\n * @returns {string}\n */\nexport function friendlyKeyboardEventString (\n  event,\n  physicalKeys = _physicalKeys,\n  ignoreModifierKeys = _ignoreModifierKeys\n) {\n  return physicalKeys\n    ? `${friendlyModifierString(event)}${friendlyCodeStrings[event.code]\n      ? friendlyCodeStrings[event.code].value\n      : event.code}`\n    : ignoreModifierKeys\n      ? `${event.key}`\n      : `${friendlyShiftlessModifierString(event)}${event.key}`\n}\n\n/**\n * Returns whether a (possibly user-defined) keyboard event is valid\n * @param {KeyboardEvent} event\n * @returns {boolean}\n */\nexport function validKeyboardEvent (event) {\n  return (\n    event &&\n    event.key &&\n    typeof event.key === 'string' &&\n    event.code &&\n    typeof event.code === 'string' &&\n    (!event.hasOwnProperty('shiftKey') ||\n      (event.shiftKey && typeof event.shiftKey === 'boolean')) &&\n    (!event.hasOwnProperty('ctrlKey') ||\n      (event.ctrlKey && typeof event.ctrlKey === 'boolean')) &&\n    (!event.hasOwnProperty('altKey') ||\n      (event.altKey && typeof event.altKey === 'boolean')) &&\n    (!event.hasOwnProperty('metaKey') ||\n      (event.metaKey && typeof event.metaKey === 'boolean'))\n  )\n}\n\n/**\n * Extracts the important attributes from a KeyboardEvent so that\n * the event can be sent as JSON\n * @param {KeyboardEvent} event\n */\nexport function simplify ({\n  key,\n  code,\n  ctrlKey,\n  altKey,\n  metaKey,\n  shiftKey,\n  repeat\n}) {\n  return {\n    key,\n    code,\n    ctrlKey,\n    altKey,\n    metaKey,\n    shiftKey,\n    repeat\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/keys.js","import { Node, Transactions, DEFAULT_TIMEOUT } from './node';\nclass Client extends Node {\n  constructor () {\n    super(...arguments);\n    this.timeout = 1000;\n    this.transactions = new Transactions();\n    this.init = ({ subscriptions = [], onConnect = [], onDisconnect = [], actions, log = false, onClientDisconnect }) => {\n      this.initLogging(log);\n      this.subscriptions = subscriptions;\n      this.actions = actions;\n      this.onConnect = onConnect;\n      this.onDisconnect = onDisconnect;\n      this.onClientDisconnect = onClientDisconnect;\n      this.connect();\n            // firefox doesn't fire port.onDisconnect on the background page for navigation\n            // events so every content script must manually call port.disconnect() on unload\n            // TODO: remove this event listener when the following bug is fixed\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1370368\n      window.addEventListener('beforeunload', () => {\n        this.port.disconnect();\n      });\n    };\n    this.connect = () => {\n      const { subscriptions: subs, onConnect, onDisconnect } = this;\n      const connectionInfo = { name: JSON.stringify({ subs, onConnect, onDisconnect }) };\n      this.port = chrome.runtime.connect(connectionInfo);\n      this.port.onDisconnect.addListener(this.disconnectListener);\n      this.port.onMessage.addListener(this.messageListener);\n    };\n        /**\n         * If the current node is the only target, immediately execute the\n         * action locally, otherwise forward the message to the background\n         * page.\n         * Doesn't send src id because only background page populates src id.\n         */\n    this.msg = (dst, action, arg) => {\n      if (dst === 0) {\n        this.actionHandler(action, arg, 0);\n      } else {\n        this.log('Tx', 'msg', 0, dst, action, arg);\n        this.port.postMessage({ t: 'msg', dst, action, arg });\n      }\n    };\n    this._getLocal = async (localId, src, action, arg) => {\n      try {\n        return { id: localId, v: await this.actionHandler(action, arg, src) };\n      } catch (error) {\n        return { id: localId, e: error };\n      }\n    };\n    this._getRemote = (dst, action, arg, timeout) => new Promise((resolve, reject) => {\n      const tid = this.transactions.new(resolve, reject, timeout);\n      this.log('Tx', 'get', 0, dst, action, arg, tid);\n      this.port.postMessage({ t: 'get', dst, action, arg, tid, timeout });\n    });\n        /**\n         * localId is the id of the current node\n         * localId will be set to 0 if called locally\n         * localId will be set to the node's global id if called from some other node\n         */\n    this.get = async (dst, action, arg, timeout = DEFAULT_TIMEOUT) => {\n      return (dst === 0)\n                ? [await this._getLocal(0, 0, action, arg)]\n                : await this._getRemote(dst, action, arg, timeout);\n    };\n    this.disconnectListener = (port) => {\n      this.onClientDisconnect && this.onClientDisconnect();\n    };\n        /**\n         * Although client nodes don't include a src id when sending messsages,\n         * because it is the bp's duty to populate the src id,\n         * incoming messages MUST have a src id.\n         * t is the message class\n         * If a client node receives a message, it must be an intended destination\n         */\n    this.messageListener = ({ src, dst, t, action, arg, tid, res }) => {\n      switch (t) {\n        case 'msg':\n          this.log('Rx', 'msg', src, dst, action, arg);\n          this.actionHandler(action, arg, src);\n          break;\n        case 'get':\n          this.log('Rx', 'get', src, dst, action, arg, tid);\n          this._getLocal(dst, src, action, arg)\n                        .then((res) => {\n                          try {\n                            this.log('Tx', 'rsp', src, dst, action, res, tid);\n                            this.port.postMessage({ t: 'rsp', src: dst, dst: src, action, tid, res });\n                          } catch (e) { } // the port may disconnect if the user navigated to a new page\n                        }).catch((e) => {\n                          try {\n                            this.log('Tx', 'rsp', src, dst, action, res, tid);\n                            this.port.postMessage({ t: 'rsp', src: dst, dst: src, action, tid, res: { e } });\n                          } catch (e) { }\n                        });\n          break;\n        case 'rsp':\n          this.log('Rx', 'rsp', src, dst, action, res, tid);\n          this.transactions.complete(tid, res);\n          break;\n        default:\n          console.error(`ERROR: Invalid message class: ${t}`);\n          break;\n      }\n    };\n  }\n}\nconst node = new Client();\nconst init = node.init;\nconst msg = node.msg;\nconst get = node.get;\nexport { init, msg, get };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mosi/client.js\n// module id = 5\n// module chunks = 0 1 2 3 4","// TODO: at some point remove this polyfill or if an npm package is released\n// use it, instead of a random github repo\nif (SAKA_PLATFORM === 'chrome') {\n  require('webextension-polyfill/dist/browser-polyfill')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/browser_polyfill.js",";\nexport const DEFAULT_TIMEOUT = 5000;\nexport class Transactions {\n  constructor () {\n    this.tid = 0;\n    this.transactions = {};\n    this.new = (resolve, reject, timeout) => {\n      const tid = ++this.tid;\n      const timer = setTimeout(() => {\n        delete this.transactions[tid];\n        reject(`Transaction ${tid} timed out.`);\n      }, timeout);\n      this.transactions[tid] = { resolve, reject, timer };\n      return tid;\n    };\n    this.complete = (tid, res) => {\n            // The transaction may have already timed out, so check if it still exists\n      const transaction = this.transactions[tid];\n      if (transaction) {\n        transaction.resolve(res);\n        clearTimeout(transaction.timer);\n        delete this.transactions[tid];\n      }\n    };\n  }\n}\nexport class Node {\n  constructor () {\n    this.actionHandler = (action, arg, src) => {\n      const handler = this.actions[action];\n      if (handler) { return handler(arg, src); }\n      throw Error(`No handler for action ${action}`);\n    };\n    this.initLogging = (log) => {\n      this.log = log\n                ? (tx_or_rx, type, src, dst, action, arg_or_res, tid) => {\n                  const arg_str = type === 'rsp' ? 'res' : 'arg';\n                  const tid_str = tid === undefined ? '' : `:${tid}`;\n                  console.log(`%c${tx_or_rx}%c[%c${type}%c${tid_str}](${src} -> ${dst}) :: %c${action}%c, ${arg_str}=`, `color: ${tx_or_rx === 'Tx' ? 'green' : 'red'}`, 'color: auto', `color: ${type === 'get' ? 'blueviolet' : type === 'msg' ? 'blue' : 'brown'}`, 'color: auto', 'color: teal', 'color: auto', arg_or_res);\n                }\n                : () => { };\n    };\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mosi/node.js\n// module id = 7\n// module chunks = 0 1 2 3 4","/* webextension-polyfill - v0.1.0 - Wed Aug 23 2017 22:58:20 */\n/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n/* vim: set sts=2 sw=2 et tw=80: */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\"use strict\";\n\nif (typeof browser === \"undefined\") {\n  // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n  // optimization for Firefox. Since Spidermonkey does not fully parse the\n  // contents of a function until the first time it's called, and since it will\n  // never actually need to be called, this allows the polyfill to be included\n  // in Firefox nearly for free.\n  const wrapAPIs = () => {\n    const apiMetadata = {\n      \"alarms\": {\n        \"clear\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"clearAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"bookmarks\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"export\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getChildren\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getRecent\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTree\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSubTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"import\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"browserAction\": {\n        \"getBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"commands\": {\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"contextMenus\": {\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"cookies\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAllCookieStores\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"set\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"downloads\": {\n        \"download\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"cancel\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"erase\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFileIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"open\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"pause\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFile\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"resume\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"extension\": {\n        \"isAllowedFileSchemeAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"isAllowedIncognitoAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"history\": {\n        \"addUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getVisits\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"deleteRange\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"i18n\": {\n        \"detectLanguage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAcceptLanguages\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"idle\": {\n        \"queryState\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"management\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"uninstallSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"notifications\": {\n        \"clear\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPermissionLevel\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"pageAction\": {\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"hide\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"runtime\": {\n        \"getBackgroundPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getBrowserInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPlatformInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"openOptionsPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"requestUpdateCheck\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"sendMessage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 3\n        },\n        \"sendNativeMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"setUninstallURL\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"sessions\": {\n        \"getRecentlyClosed\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"restore\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"storage\": {\n        \"local\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"managed\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"sync\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        }\n      },\n      \"tabs\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"captureVisibleTab\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"detectLanguage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"duplicate\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"executeScript\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getZoom\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getZoomSettings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"highlight\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"insertCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"reload\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"query\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"sendMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 3\n        },\n        \"setZoom\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"setZoomSettings\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"update\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        }\n      },\n      \"webNavigation\": {\n        \"getAllFrames\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFrame\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"webRequest\": {\n        \"handlerBehaviorChanged\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"windows\": {\n        \"create\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getLastFocused\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      }\n    };\n\n    /**\n     * A WeakMap subclass which creates and stores a value for any key which does\n     * not exist when accessed, but behaves exactly as an ordinary WeakMap\n     * otherwise.\n     *\n     * @param {function} createItem\n     *        A function which will be called in order to create the value for any\n     *        key which does not exist, the first time it is accessed. The\n     *        function receives, as its only argument, the key being created.\n     */\n    class DefaultWeakMap extends WeakMap {\n      constructor(createItem, items = undefined) {\n        super(items);\n        this.createItem = createItem;\n      }\n\n      get(key) {\n        if (!this.has(key)) {\n          this.set(key, this.createItem(key));\n        }\n\n        return super.get(key);\n      }\n    }\n\n    /**\n     * Returns true if the given object is an object with a `then` method, and can\n     * therefore be assumed to behave as a Promise.\n     *\n     * @param {*} value The value to test.\n     * @returns {boolean} True if the value is thenable.\n     */\n    const isThenable = value => {\n      return value && typeof value === \"object\" && typeof value.then === \"function\";\n    };\n\n    /**\n     * Creates and returns a function which, when called, will resolve or reject\n     * the given promise based on how it is called:\n     *\n     * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n     *   the promise is rejected with that value.\n     * - If the function is called with exactly one argument, the promise is\n     *   resolved to that value.\n     * - Otherwise, the promise is resolved to an array containing all of the\n     *   function's arguments.\n     *\n     * @param {object} promise\n     *        An object containing the resolution and rejection functions of a\n     *        promise.\n     * @param {function} promise.resolve\n     *        The promise's resolution function.\n     * @param {function} promise.rejection\n     *        The promise's rejection function.\n     *\n     * @returns {function}\n     *        The generated callback function.\n     */\n    const makeCallback = promise => {\n      return (...callbackArgs) => {\n        if (chrome.runtime.lastError) {\n          promise.reject(chrome.runtime.lastError);\n        } else if (callbackArgs.length === 1) {\n          promise.resolve(callbackArgs[0]);\n        } else {\n          promise.resolve(callbackArgs);\n        }\n      };\n    };\n\n    /**\n     * Creates a wrapper function for a method with the given name and metadata.\n     *\n     * @param {string} name\n     *        The name of the method which is being wrapped.\n     * @param {object} metadata\n     *        Metadata about the method being wrapped.\n     * @param {integer} metadata.minArgs\n     *        The minimum number of arguments which must be passed to the\n     *        function. If called with fewer than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {integer} metadata.maxArgs\n     *        The maximum number of arguments which may be passed to the\n     *        function. If called with more than this number of arguments, the\n     *        wrapper will raise an exception.\n     *\n     * @returns {function(object, ...*)}\n     *       The generated wrapper function.\n     */\n    const wrapAsyncFunction = (name, metadata) => {\n      const pluralizeArguments = (numArgs) => numArgs == 1 ? \"argument\" : \"arguments\";\n\n      return function asyncFunctionWrapper(target, ...args) {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          target[name](...args, makeCallback({resolve, reject}));\n        });\n      };\n    };\n\n    /**\n     * Wraps an existing method of the target object, so that calls to it are\n     * intercepted by the given wrapper function. The wrapper function receives,\n     * as its first argument, the original `target` object, followed by each of\n     * the arguments passed to the orginal method.\n     *\n     * @param {object} target\n     *        The original target object that the wrapped method belongs to.\n     * @param {function} method\n     *        The method being wrapped. This is used as the target of the Proxy\n     *        object which is created to wrap the method.\n     * @param {function} wrapper\n     *        The wrapper function which is called in place of a direct invocation\n     *        of the wrapped method.\n     *\n     * @returns {Proxy<function>}\n     *        A Proxy object for the given method, which invokes the given wrapper\n     *        method in its place.\n     */\n    const wrapMethod = (target, method, wrapper) => {\n      return new Proxy(method, {\n        apply(targetMethod, thisObj, args) {\n          return wrapper.call(thisObj, target, ...args);\n        },\n      });\n    };\n\n    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    /**\n     * Wraps an object in a Proxy which intercepts and wraps certain methods\n     * based on the given `wrappers` and `metadata` objects.\n     *\n     * @param {object} target\n     *        The target object to wrap.\n     *\n     * @param {object} [wrappers = {}]\n     *        An object tree containing wrapper functions for special cases. Any\n     *        function present in this object tree is called in place of the\n     *        method in the same location in the `target` object tree. These\n     *        wrapper methods are invoked as described in {@see wrapMethod}.\n     *\n     * @param {object} [metadata = {}]\n     *        An object tree containing metadata used to automatically generate\n     *        Promise-based wrapper functions for asynchronous. Any function in\n     *        the `target` object tree which has a corresponding metadata object\n     *        in the same location in the `metadata` tree is replaced with an\n     *        automatically-generated wrapper function, as described in\n     *        {@see wrapAsyncFunction}\n     *\n     * @returns {Proxy<object>}\n     */\n    const wrapObject = (target, wrappers = {}, metadata = {}) => {\n      let cache = Object.create(null);\n\n      let handlers = {\n        has(target, prop) {\n          return prop in target || prop in cache;\n        },\n\n        get(target, prop, receiver) {\n          if (prop in cache) {\n            return cache[prop];\n          }\n\n          if (!(prop in target)) {\n            return undefined;\n          }\n\n          let value = target[prop];\n\n          if (typeof value === \"function\") {\n            // This is a method on the underlying object. Check if we need to do\n            // any wrapping.\n\n            if (typeof wrappers[prop] === \"function\") {\n              // We have a special-case wrapper for this method.\n              value = wrapMethod(target, target[prop], wrappers[prop]);\n            } else if (hasOwnProperty(metadata, prop)) {\n              // This is an async method that we have metadata for. Create a\n              // Promise wrapper for it.\n              let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n              value = wrapMethod(target, target[prop], wrapper);\n            } else {\n              // This is a method that we don't know or care about. Return the\n              // original method, bound to the underlying object.\n              value = value.bind(target);\n            }\n          } else if (typeof value === \"object\" && value !== null &&\n                     (hasOwnProperty(wrappers, prop) ||\n                      hasOwnProperty(metadata, prop))) {\n            // This is an object that we need to do some wrapping for the children\n            // of. Create a sub-object wrapper for it with the appropriate child\n            // metadata.\n            value = wrapObject(value, wrappers[prop], metadata[prop]);\n          } else {\n            // We don't need to do any wrapping for this property,\n            // so just forward all access to the underlying object.\n            Object.defineProperty(cache, prop, {\n              configurable: true,\n              enumerable: true,\n              get() {\n                return target[prop];\n              },\n              set(value) {\n                target[prop] = value;\n              },\n            });\n\n            return value;\n          }\n\n          cache[prop] = value;\n          return value;\n        },\n\n        set(target, prop, value, receiver) {\n          if (prop in cache) {\n            cache[prop] = value;\n          } else {\n            target[prop] = value;\n          }\n          return true;\n        },\n\n        defineProperty(target, prop, desc) {\n          return Reflect.defineProperty(cache, prop, desc);\n        },\n\n        deleteProperty(target, prop) {\n          return Reflect.deleteProperty(cache, prop);\n        },\n      };\n\n      return new Proxy(target, handlers);\n    };\n\n    /**\n     * Creates a set of wrapper functions for an event object, which handles\n     * wrapping of listener functions that those messages are passed.\n     *\n     * A single wrapper is created for each listener function, and stored in a\n     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n     * retrieve the original wrapper, so that  attempts to remove a\n     * previously-added listener work as expected.\n     *\n     * @param {DefaultWeakMap<function, function>} wrapperMap\n     *        A DefaultWeakMap object which will create the appropriate wrapper\n     *        for a given listener function when one does not exist, and retrieve\n     *        an existing one when it does.\n     *\n     * @returns {object}\n     */\n    const wrapEvent = wrapperMap => ({\n      addListener(target, listener, ...args) {\n        target.addListener(wrapperMap.get(listener), ...args);\n      },\n\n      hasListener(target, listener) {\n        return target.hasListener(wrapperMap.get(listener));\n      },\n\n      removeListener(target, listener) {\n        target.removeListener(wrapperMap.get(listener));\n      },\n    });\n\n    const onMessageWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps a message listener function so that it may send responses based on\n       * its return value, rather than by returning a sentinel value and calling a\n       * callback. If the listener function returns a Promise, the response is\n       * sent when the promise either resolves or rejects.\n       *\n       * @param {*} message\n       *        The message sent by the other end of the channel.\n       * @param {object} sender\n       *        Details about the sender of the message.\n       * @param {function(*)} sendResponse\n       *        A callback which, when called with an arbitrary argument, sends\n       *        that value as a response.\n       * @returns {boolean}\n       *        True if the wrapped listener returned a Promise, which will later\n       *        yield a response. False otherwise.\n       */\n      return function onMessage(message, sender, sendResponse) {\n        let result = listener(message, sender);\n\n        if (isThenable(result)) {\n          result.then(sendResponse, error => {\n            console.error(error);\n            sendResponse(error);\n          });\n\n          return true;\n        } else if (result !== undefined) {\n          sendResponse(result);\n        }\n      };\n    });\n\n    const staticWrappers = {\n      runtime: {\n        onMessage: wrapEvent(onMessageWrappers),\n      },\n    };\n\n    return wrapObject(chrome, staticWrappers, apiMetadata);\n  };\n\n  window.browser = wrapAPIs();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webextension-polyfill/dist/browser-polyfill.js\n// module id = 8\n// module chunks = 0 1 2 3 4","module.exports = {\"Backquote\":{\"value\":\"`\",\"shift\":\"~\"},\"Backslash\":{\"value\":\"\\\\\",\"shift\":\"|\"},\"BracketLeft\":{\"value\":\"[\",\"shift\":\"{\"},\"BracketRight\":{\"value\":\"]\",\"shift\":\"}\"},\"Comma\":{\"value\":\",\",\"shift\":\"<\"},\"Digit0\":{\"value\":\"0\",\"shift\":\")\"},\"Digit1\":{\"value\":\"1\",\"shift\":\"!\"},\"Digit2\":{\"value\":\"2\",\"shift\":\"@\"},\"Digit3\":{\"value\":\"3\",\"shift\":\"#\"},\"Digit4\":{\"value\":\"4\",\"shift\":\"$\"},\"Digit5\":{\"value\":\"5\",\"shift\":\"%\"},\"Digit6\":{\"value\":\"6\",\"shift\":\"^\"},\"Digit7\":{\"value\":\"7\",\"shift\":\"&\"},\"Digit8\":{\"value\":\"8\",\"shift\":\"*\"},\"Digit9\":{\"value\":\"9\",\"shift\":\"(\"},\"Equal\":{\"value\":\"=\",\"shift\":\"+\"},\"IntlBackslash\":{\"value\":\"\\\\\",\"shift\":\"|\",\"international\":true},\"IntlRo\":{\"value\":\"\\\\\",\"shift\":\"\",\"international\":true},\"IntlYen\":{\"value\":\"\",\"shift\":\"\",\"value2\":\"\\\\\",\"shift2\":\"/\",\"international\":true},\"KeyA\":{\"value\":\"a\",\"shift\":\"A\"},\"KeyB\":{\"value\":\"b\",\"shift\":\"B\"},\"KeyC\":{\"value\":\"c\",\"shift\":\"C\"},\"KeyD\":{\"value\":\"d\",\"shift\":\"D\"},\"KeyE\":{\"value\":\"e\",\"shift\":\"E\"},\"KeyF\":{\"value\":\"f\",\"shift\":\"F\"},\"KeyG\":{\"value\":\"g\",\"shift\":\"G\"},\"KeyH\":{\"value\":\"h\",\"shift\":\"H\"},\"KeyI\":{\"value\":\"i\",\"shift\":\"I\"},\"KeyJ\":{\"value\":\"j\",\"shift\":\"J\"},\"KeyK\":{\"value\":\"k\",\"shift\":\"K\"},\"KeyL\":{\"value\":\"l\",\"shift\":\"L\"},\"KeyM\":{\"value\":\"m\",\"shift\":\"M\"},\"KeyN\":{\"value\":\"n\",\"shift\":\"N\"},\"KeyO\":{\"value\":\"o\",\"shift\":\"O\"},\"KeyP\":{\"value\":\"p\",\"shift\":\"P\"},\"KeyQ\":{\"value\":\"q\",\"shift\":\"Q\"},\"KeyR\":{\"value\":\"r\",\"shift\":\"R\"},\"KeyS\":{\"value\":\"s\",\"shift\":\"S\"},\"KeyT\":{\"value\":\"t\",\"shift\":\"T\"},\"KeyU\":{\"value\":\"u\",\"shift\":\"U\"},\"KeyV\":{\"value\":\"v\",\"shift\":\"V\"},\"KeyW\":{\"value\":\"w\",\"shift\":\"W\"},\"KeyX\":{\"value\":\"x\",\"shift\":\"X\"},\"KeyY\":{\"value\":\"y\",\"shift\":\"Y\"},\"KeyZ\":{\"value\":\"z\",\"shift\":\"Z\"},\"Minus\":{\"value\":\"-\",\"shift\":\"_\"},\"Period\":{\"value\":\".\",\"shift\":\">\"},\"Quote\":{\"value\":\"'\",\"shift\":\"\\\"\"},\"Semicolon\":{\"value\":\";\",\"shift\":\":\"},\"Slash\":{\"value\":\"/\",\"shift\":\"?\"},\"Space\":{\"value\":\"Space\",\"shift\":\"Space\"},\"Tab\":{\"value\":\"Tab\",\"shift\":\"Tab\"},\"CapsLock\":{\"value\":\"CapsLock\",\"shift\":\"CapsLock\"},\"Escape\":{\"value\":\"Escape\",\"shift\":\"Escape\"},\"Backspace\":{\"value\":\"Backspace\",\"shift\":\"Backspace\"},\"ArrowLeft\":{\"value\":\"ArrowLeft\",\"shift\":\"ArrowLeft\"},\"ArrowRight\":{\"value\":\"ArrowRight\",\"shift\":\"ArrowRight\"},\"ArrowUp\":{\"value\":\"ArrowUp\",\"shift\":\"ArrowUp\"},\"ArrowDown\":{\"value\":\"ArrowDown\",\"shift\":\"ArrowDown\"},\"ShiftLeft\":{\"value\":\"ShiftLeft\",\"shift\":\"ShiftLeft\"},\"ShiftRight\":{\"value\":\"ShiftRight\",\"shift\":\"ShiftRight\"},\"ControlLeft\":{\"value\":\"ControlLeft\",\"shift\":\"ControlLeft\"},\"AltLeft\":{\"value\":\"AltLeft\",\"shift\":\"AltLeft\"},\"AltRight\":{\"value\":\"AltRight\",\"shift\":\"AltRight\"},\"MetaLeft\":{\"value\":\"MetaLeft\",\"shift\":\"MetaLeft\"},\"MetaRight\":{\"value\":\"MetaRight\",\"shift\":\"MetaRight\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/friendlyCodeStrings.json\n// module id = 10\n// module chunks = 0 1 2 3 4","import { fullscreenchange } from 'lib/dom'\n\n/**\n * Events Saka Key intercepts and whether they must be trusted or not.\n * Keyboard events must be trusted so that websites cannot issue arbitrary commands\n */\nexport default {\n  keydown: true,\n  keypress: true,\n  keyup: true,\n  blur: false,\n  focus: false,\n  click: false,\n  mousedown: false,\n  [fullscreenchange]: false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/interceptedEventTypes.js","export const guiRoot = document.createElement('div')\nguiRoot.id = 'saka-gui-root'\nguiRoot.style = `position: absolute;\nleft: 0;\ntop: 0;\nwidth: 100%;\nheight: 100%;\nz-index: 2147483647;\nopacity: 1;\npointer-events: none;`\n\ndocument.documentElement.appendChild(guiRoot)\n\nexport function handleFullscreenChange (event) {\n  if (SAKA_DEBUG) console.log('fullscreenElement changed')\n  if (document.webkitIsFullScreen) {\n    const fsElement = document.webkitFullscreenElement\n    if (fsElement) {\n      fsElement.appendChild(guiRoot)\n    }\n  } else {\n    document.documentElement.appendChild(guiRoot)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/gui.js","// simple middleware that intercepts events/messages before the active mode/messaged mode\n// though of a stack of handlers... but that's complex and for now isn't needed\n\nimport { normalizeEventType } from 'lib/dom'\nimport { handleFullscreenChange } from './gui'\n\nlet preventStealFocus\nlet hasInteractedWithPage = false\n\nconst middleware = {\n  onOptionsChange: options => {\n    preventStealFocus = options.preventStealFocus\n    if (!hasInteractedWithPage && preventStealFocus) {\n      document.activeElement && document.activeElement.blur()\n    }\n  },\n  events: {\n    keydown: () => undefined,\n    keypress: () => undefined,\n    keyup: () => undefined,\n    blur: () => undefined,\n    focus: event => {\n      if (preventStealFocus && hasInteractedWithPage === false) {\n        event.target.blur()\n        return 'Same'\n      }\n    },\n    click: event => {\n      hasInteractedWithPage = true\n    },\n    mousedown: event => {\n      hasInteractedWithPage = true\n    },\n    fullscreenchange: event => {\n      handleFullscreenChange(event)\n    }\n  }\n  // NOTE: message middleware doesn't make sense because all messages are targeted\n  // to a specific mode, whereas DOM events can be handled by any mode\n}\n\nexport function middlewareOnOptionsChange (options) {\n  middleware.onOptionsChange(options)\n}\n\nexport function passDOMEventToMiddleware (event) {\n  const nextMode = middleware.events[normalizeEventType(event.type)](event)\n  if (SAKA_DEBUG && nextMode) {\n    event.middleware = 'generic'\n  }\n  return nextMode\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/middleware.js","import { isTextEditable, deepActiveElement, normalizeEventType } from 'lib/dom'\nimport interceptedEventTypes from './interceptedEventTypes'\nimport {\n  passDOMEventToMiddleware,\n  middlewareOnOptionsChange\n} from './middleware'\n\n/** The active mode of the Modes state machine */\nlet currentMode\nlet modes = {}\n/** whether saka key is enabled or not */\nlet enabled = false\n\nconst defaultModeObject = {\n  onEnter: () => {},\n  onExit: () => {},\n  onOptionsChange: () => {},\n  keydown: () => 'Same',\n  keypress: () => 'Same',\n  keyup: () => 'Same',\n  blur: () => 'Same',\n  focus: () => 'Same',\n  click: () => 'Same',\n  mousedown: () => 'Same',\n  fullscreenchange: () => 'Same',\n  messages: {}\n}\n\n/** Initializes the Modes state machine */\nexport function initModes (startMode, availableModes, actions) {\n  if (SAKA_DEBUG) console.log(`Start mode: ${startMode}`)\n  currentMode = startMode\n  Object.entries(availableModes).map(([name, mode]) => {\n    modes[name] = Object.assign({}, defaultModeObject, mode)\n    Object.assign(actions, wrapModeMessages(modes[name].messages))\n  })\n}\n\nexport let removeEventListeners\nexport function addEventListeners (clientType) {\n  // event listeners must be added, except if the client is a content script on Chrome\n  // for which the loader already added event listeners\n  if (SAKA_PLATFORM === 'chrome' && clientType === 'content_script') {\n    window.handleDOMEvent = handleDOMEvent\n    removeEventListeners = window.removePreloadedDOMEventListener\n  } else {\n    addNormalEventListeners()\n    removeEventListeners = removeNormalEventListeners\n  }\n}\n\nfunction addNormalEventListeners () {\n  Object.keys(interceptedEventTypes).forEach((eventType, i) => {\n    window.addEventListener(eventType, handleDOMEvent, true)\n  })\n  if (SAKA_DEBUG) console.log('Normal Event Listeners Added')\n}\n\nfunction removeNormalEventListeners () {\n  Object.keys(interceptedEventTypes).forEach(eventType => {\n    window.removeEventListener(eventType, handleDOMEvent, true)\n  })\n  if (SAKA_DEBUG) console.log('Normal Event Listeners Removed')\n}\n\n/** Handles when messages containing updated options are received */\nexport function clientOptions (options) {\n  if (options === undefined) {\n    if (SAKA_DEBUG) {\n      console.error('Received undefined client options')\n    }\n    return\n  }\n  if (typeof options === 'string') {\n    console.error('Failed to configure client options: ', options)\n    return\n  }\n  enabled = options.enabled\n  Object.entries(modes).forEach(([name, mode]) => {\n    mode.onOptionsChange(options)\n  })\n  middlewareOnOptionsChange(options)\n  changeMode({\n    mode: options.enabled ? 'Reset' : 'Disabled',\n    type: 'clientOptions',\n    options\n  })\n}\n\n/**\n * Transforms a reserved mode name to an actual mode name.\n * For regular mode names, returns the name unchanged.\n * Reserved mode names:\n * * Same - returns the active mode name\n * * Reset - returns either Command or Text, depending on deepActiveElement\n * * TryText - if deepActiveElement is a text input, returns Text. \n *   Otherwise returns the active mode name\n * @param {string} name\n * @returns {string}\n */\nfunction modeNameTransform (name) {\n  switch (name) {\n    case 'Same':\n      return currentMode\n    case 'Reset':\n      return isTextEditable(deepActiveElement()) ? 'Text' : 'Command'\n    case 'TryText':\n      return isTextEditable(deepActiveElement()) ? 'Text' : currentMode\n    default:\n      return name\n  }\n}\n\n/**\n * Sets the active mode to a new mode.\n * If the active mode changes calls the old active mode's onExit() function,\n * then calls the new active modes's onEnter() function.\n * @param {string} nextMode\n */\nfunction setMode (nextMode, event) {\n  nextMode = modeNameTransform(nextMode)\n  if (SAKA_DEBUG && !nextMode) {\n    throw Error(\n      `Mode ${currentMode} is missing a handler for ${event.type} events`\n    )\n  }\n  if (SAKA_DEBUG && !modes[nextMode]) {\n    throw Error(\n      `Event ${event.type} in mode ${currentMode} results in invalid next mode ${nextMode}`\n    )\n  }\n  if (nextMode !== currentMode) {\n    if (SAKA_DEBUG) {\n      const middlewareString = event.middleware\n        ? ` :: via ${event.middleware} middleware`\n        : ''\n      console.log(\n        `%c${event.type}: %c${currentMode} -> %c${nextMode}%c${middlewareString}`,\n        'color: #2196F3;',\n        'color: grey;',\n        'color: #4CAF50;',\n        'color: #FF4500;',\n        event\n      )\n    }\n    modes[currentMode].onExit(event)\n    modes[nextMode].onEnter(event)\n  }\n  currentMode = nextMode\n}\n\n/**\n * Explicitly changes the modes. This function is declared so that\n * it can be called by any mode with msg(0, 'changeMode', { mode, why })\n * mode - the name of the new mode\n * why - a string explaining why the mode was changed\n*/\nexport function changeMode (modeChangeEvent) {\n  if (SAKA_DEBUG) {\n    if (!modeChangeEvent.mode) {\n      throw Error('Called changeMode but failed to provide a new mode')\n    }\n    if (!modeChangeEvent.type) {\n      throw Error('Called changeMode but failed to provide a type')\n    }\n  }\n  if (enabled) {\n    setMode(modeChangeEvent.mode, modeChangeEvent)\n  }\n}\n\n/**\n * @param {Event} event\n */\nfunction handleDOMEvent (event) {\n  if (enabled && (event.isTrusted || !interceptedEventTypes[event.type])) {\n    const nextMode =\n      passDOMEventToMiddleware(event) ||\n      modes[currentMode][normalizeEventType(event.type)](event)\n    setMode(nextMode, event)\n  }\n}\n\n/**\n * In Mosi, actions are message endpoints that return a single value\n * that is returned to the source node on calls to get().\n * In Saka Key, messages may optionally change the mode by returning\n * an object of the form { nextMode: string, value: any }\n * @param {*} modeMessages \n */\nfunction wrapModeMessages (modeMessages) {\n  const wrappedMessages = {}\n  Object.entries(modeMessages).forEach(([name, message]) => {\n    wrappedMessages[name] = wrapMessage(name, message)\n  })\n  return wrappedMessages\n}\n\nfunction wrapMessage (name, message) {\n  return async function (arg, src) {\n    if (enabled) {\n      const result = await message(arg, src)\n      if (result && result.nextMode) {\n        setMode(result.nextMode, { type: `message: ${name}` })\n      }\n      return result && result.value\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/modes.js","export default {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/disabled/client.js","require('smoothscroll-polyfill').polyfill()\n// TODO: Replace smoothscroll-polyfill implementation with a custom implementation\n// Currently, scroll down, left, right, up use small custom scroll implementation\n// but scroll page/half page uses polyfill, which is large and only scrolls documentElement\n\nexport let scrollStep = 20\nexport let behavior = 'smooth'\nlet scrollFunction = scrollSmooth\nlet lastAnimationFrame\nlet currentScrollElement = calculateCurrentScrollElement()\n\nexport function initScrolling (_smoothScroll, _scrollStep) {\n  scrollStep = _scrollStep\n  scrollFunction = _smoothScroll ? scrollSmooth : scrollRegular\n  behavior = _smoothScroll ? 'smooth' : 'instant'\n}\n\n/**\n * cancelScroll should be called when the user releases the scroll key to stop the\n * smooth scrolling process. Otherwise, scrolling would unexpectedly continue.\n */\nexport function cancelScroll () {\n  cancelAnimationFrame(lastAnimationFrame)\n}\n\nexport function scroll (\n  repeat,\n  step,\n  direction,\n  element = currentScrollElement\n) {\n  if (!repeat) {\n    if (!scrollsVertically(element)) {\n      if (SAKA_DEBUG) console.log(element, \"doesn't scroll vertically\")\n      currentScrollElement = element = calculateCurrentScrollElement()\n    }\n  }\n  scrollFunction(element, repeat, step, direction)\n}\n\n/**\n * Scrolls the selected element smoothly. Works around the quirks of keydown events.\n * The first time a key is pressed (and held), a keydown event is fired immediately.\n * After that, there is a delay before the 2nd keydown event is fired.\n * The 3rd and all subsequent keydown events fire in rapid succession.\n * event.repeat is false for the first keydown event, but true for all others\n * The delay (70 and 500) are carefully selected to keep scrolling smooth but\n * prevent unexpected scrolling after the user has released the scroll key.\n * Relying on keyup events exclusively to stop scrolling is unreliable.\n */\nfunction scrollSmooth (element, repeat, step, direction) {\n  cancelAnimationFrame(lastAnimationFrame)\n  let startTime\n  const delay = repeat ? 70 : 500\n  const doScroll = curTime => {\n    startTime = startTime || curTime\n    element[direction] += step\n    if (curTime - startTime < delay) {\n      lastAnimationFrame = requestAnimationFrame(doScroll)\n    } else {\n      cancelAnimationFrame(lastAnimationFrame)\n    }\n  }\n  requestAnimationFrame(doScroll)\n}\n\n/** Scrolls the selected element immediately */\nfunction scrollRegular (element, repeat, step, direction) {\n  element[direction] += step\n}\n\n// TODO: the implementation below makes me feel guilty... but there's no better way\n/** returns true if an element scrolls vertically, false otherwise */\nexport function scrollsVertically (element) {\n  const yStart = element.scrollTop\n  element.scrollTop += 1\n  const yAfterScrollDown = element.scrollTop\n  element.scrollTop -= 1\n  const yAfterScrollUp = element.scrollTop\n  return yStart !== yAfterScrollDown || yStart !== yAfterScrollUp\n}\n\nexport function calculateCurrentScrollElement () {\n  let scrollElement = largestScrollableElement()\n  if (scrollElement === undefined) {\n    scrollElement = guessScrollElement()\n    if (SAKA_DEBUG) {\n      console.log('No scrollElement candidate, defaulting to: ', scrollElement)\n    }\n  } else if (SAKA_DEBUG) {\n    console.log('scrollElement changed to: ', scrollElement)\n  }\n  return scrollElement\n}\n\nfunction guessScrollElement () {\n  return document.scrollingElement || document.body || document.documentElement\n}\n\n/**\n * Returns the largest scrollable element that is the root element or one of\n * its children  operates by analyzing dimnsions/scrollability of all nodes\n * up to depth levels down in hierarchy\n * @param {HTMLElement} element - the root element\n * @param {number} depth - the maximum depth, pass -1 to indicate no limit,\n * depth = 8 is just large enough for gmail\n */\nfunction largestScrollableElementTopDown (\n  element = guessScrollElement(),\n  depth = 8\n) {\n  function _largestScrollableElementTopDown (element, depth) {\n    if (depth === 0) return\n    if (!element) return\n    if (getComputedStyle(element).overflow === 'hidden') return\n    if (scrollsVertically(element)) {\n      const rect = element.getBoundingClientRect()\n      const area = rect.width * rect.height\n      return [element, area]\n    }\n    let largestFound\n    ;[...element.children]\n      .map(child => _largestScrollableElementTopDown(child, depth - 1))\n      .forEach(scrollElementInfo => {\n        if (scrollElementInfo) {\n          if (!largestFound) {\n            largestFound = scrollElementInfo\n          } else {\n            if (scrollElementInfo[1] > largestFound[1]) {\n              largestFound = scrollElementInfo\n            }\n          }\n        }\n      })\n    return largestFound\n  }\n  const scrollInfo = _largestScrollableElementTopDown(element, depth)\n  return scrollInfo && scrollInfo[0]\n}\n\n/**\n * Returns the largest scrollabel element that is the root element or one of\n * its children. Works by finding the element in the middle of the page,\n * tracing it up to the root, then walking down until a scrollable elemnt is found\n */\nfunction largestScrollableElementBottomUp () {\n  const middleChild = document.elementFromPoint(innerWidth / 2, innerHeight / 2)\n  if (!middleChild) return\n  function firstScrollingAncestor (element) {\n    if (!element) return\n    return (\n      firstScrollingAncestor(element.parentElement) ||\n      (scrollsVertically(element) && element)\n    )\n  }\n  return firstScrollingAncestor(middleChild) || undefined\n}\n\nfunction largestScrollableElement () {\n  return largestScrollableElementTopDown() || largestScrollableElementBottomUp()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/scroll/utils.js","import { behavior, scroll, scrollStep } from './utils'\n\nexport function scrollDown (event) {\n  scroll(event.repeat, scrollStep, 'scrollTop')\n}\n\nexport function scrollUp (event) {\n  scroll(event.repeat, -scrollStep, 'scrollTop')\n}\n\nexport function scrollLeft (event) {\n  scroll(event.repeat, -scrollStep, 'scrollLeft')\n}\n\nexport function scrollRight (event) {\n  scroll(event.repeat, scrollStep, 'scrollLeft')\n}\n\nexport function scrollPageDown () {\n  scrollBy({\n    top: innerHeight * 0.9,\n    behavior\n  })\n}\n\nexport function scrollPageUp () {\n  scrollBy({\n    top: -innerHeight * 0.9,\n    behavior\n  })\n}\n\nexport function scrollHalfPageDown () {\n  scrollBy({\n    top: innerHeight / 2,\n    behavior\n  })\n}\n\nexport function scrollHalfPageUp () {\n  scrollBy({\n    top: -innerHeight / 2,\n    behavior\n  })\n}\n\nexport function scrollToBottom () {\n  scrollTo({\n    top: document.documentElement.scrollHeight,\n    behavior\n  })\n}\n\nexport function scrollToTop () {\n  scrollTo({\n    top: 0,\n    behavior\n  })\n}\n\nexport function scrollToLeft () {\n  scrollTo({\n    left: 0,\n    behavior\n  })\n}\n\nexport function scrollToRight () {\n  scrollTo({\n    left: document.documentElement.scrollWidth,\n    behavior\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/scroll/index.js","export function goBack () {\n  window.history.go(-1)\n}\n\nexport function goForward () {\n  window.history.go(1)\n}\n\n/* Goes to the next page (as in 2nd page of a google search) */\nexport function nextPage () {\n  console.log('>> Next page')\n}\n\nexport function previousPage () {\n  console.log('<< Previous page')\n}\n\n/* Goes up URL hierarchy (from /cookie_recipes/3 to /cookie_recipes) */\nexport function goUp () {\n  const rawURL = window.location.href\n  const url = rawURL.endsWith('/')\n    ? rawURL.substring(0, rawURL.length - 1)\n    : rawURL\n  const urlsplit = url.split('/')\n  // make sure we haven't hit the base domain yet\n  if (urlsplit.length > 3) {\n    window.location.href = urlsplit\n      .slice(0, Math.max(3, urlsplit.length - 1))\n      .join('/')\n  }\n}\n\nexport function goToRoot () {\n  window.location.href = window.location.origin\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/navigation.js","import { msg } from 'mosi/client'\nexport const background = (action, arg) => () => msg(1, action, arg)\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/msg.js","export function toggleHelpMenu () {\n  // TODO\n}\n\nexport function toggleSaka () {\n  try {\n    browser.runtime.sendMessage(\n      'nbdfpcokndmapcollfpjdpjlabnibjdi',\n      'toggleSaka'\n    )\n  } catch (e) {\n    console.error(\n      'Install Saka at https://chrome.google.com/webstore/detail/saka/nbdfpcokndmapcollfpjdpjlabnibjdi'\n    )\n  }\n}\nexport function passOneKey (event) {\n  // preventDefault() to suppress keypress event\n  // no way to suppress keyup event, so Pass mode must ignore\n  // first keyup event\n  event.preventDefault()\n  event.passKeyType = 'one'\n  return 'Pass'\n}\n\nexport function passAllKeys (event) {\n  event.preventDefault()\n  event.passKeyType = 'all'\n  return 'Pass'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/misc.js","export * from './scroll'\nexport * from './navigation'\nexport * from './hint'\nexport * from './tab'\nexport * from './clipboard'\nexport * from './misc'\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/index.js","import 'lib/browser_polyfill'\nimport Trie from 'lib/trie'\nimport * as commands from './commands'\nimport { keyboardEventString } from 'lib/keys'\n\nconst trie = new Trie()\n\nexport function initInputTrie (root) {\n  trie.init(root)\n}\n\nexport function resetInputTrie () {\n  trie.reset()\n}\n\nexport function advanceInputTrie (event) {\n  const command = trie.advance(keyboardEventString(event))\n  switch (command) {\n    case Trie.INVALID:\n      return 'Same'\n    case Trie.INTERNAL:\n      event.preventDefault()\n      event.stopImmediatePropagation()\n      return 'Same'\n    default:\n      event.preventDefault()\n      event.stopImmediatePropagation()\n      return commands[command](event) || 'Same'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/trie.js","import { initInputTrie, resetInputTrie, advanceInputTrie } from './trie'\nimport { initScrolling, cancelScroll } from './commands/scroll/utils'\nimport { setKeyboardSettings, isModifierKey } from 'lib/keys'\n\nexport default {\n  onEnter: event => {\n    resetInputTrie()\n  },\n  onOptionsChange: options => {\n    setKeyboardSettings(options.physicalKeys, options.ignoreModifierKeys)\n    initInputTrie(options.commandBindings)\n    initScrolling(options.smoothScroll, options.scrollStep)\n  },\n  keydown: event => (isModifierKey(event) ? 'Same' : advanceInputTrie(event)),\n  keyup: event => {\n    // TODO: decide whether/how to suppress this\n    event.stopImmediatePropagation()\n    cancelScroll()\n    return 'Same'\n  },\n  blur: () => 'Reset',\n  focus: () => 'Reset'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/index.js","import Trie from 'lib/trie'\nimport { keyboardEventString } from 'lib/keys'\n\nconst trie = new Trie()\n\nexport function initInputTrie (root) {\n  trie.init(root)\n}\n\nexport function resetInputTrie () {\n  trie.reset()\n}\n\nexport function advanceInputTrie (event) {\n  const command = trie.advance(keyboardEventString(event))\n  switch (command) {\n    case Trie.INVALID:\n      return 'Same'\n    case Trie.INTERNAL:\n      event.preventDefault()\n      event.stopImmediatePropagation()\n      return 'Same'\n    default:\n      event.preventDefault()\n      event.stopImmediatePropagation()\n      return command === 'exitPassMode' ? 'Reset' : 'Same'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/pass/trie.js","import { initInputTrie, resetInputTrie, advanceInputTrie } from './trie'\n\n// Notes: The keydown event that enters this mode has a corresponding keyup\n// event that should be ignored. Passing a single key is terminated on the\n// keyup event to ensure any page handlers for the keyup event are triggered.\n\nlet passKeysLeft\n\nexport default {\n  onOptionsChange: options => {\n    initInputTrie(options.passBindings)\n  },\n  onEnter: event => {\n    if (event.passKeyType === 'all') {\n      passKeysLeft = -1\n      resetInputTrie()\n    } else {\n      passKeysLeft = 2\n    }\n  },\n  keydown: event => (passKeysLeft === -1 ? advanceInputTrie(event) : 'Same'),\n  keyup: event =>\n    passKeysLeft !== -1 && --passKeysLeft === 0 ? 'Reset' : 'Same',\n  blur: () => 'Reset',\n  focus: () => 'Reset'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/pass/client.js","import { msg } from 'mosi/client'\nimport { mouseEvent } from 'lib/dom'\nimport { isMac } from 'lib/keys'\n\nlet activator\nexport function configureActivate (_activator = 'openLink') {\n  activator = _activator\n}\n\n/**\n * Calls the appropriate activation function on the target hintable element.\n * Returns the next mode\n * @param {KeyboardEvent} event - an object that representing a keyboard event\n * @param {HTMLElement} target \n * @returns {string}\n */\nexport function activate (event, target) {\n  return activators[activator](event, target) || 'Reset'\n}\n\n/**\n * An object containing callbacks that are executed when a target element\n * is selected using hints mode.\n * @type {{ [key: string]: (event: KeyboardEvent, target: HTMLElement) => string }}\n */\nconst activators = {\n  openLink: (event, target) => {\n    if (\n      SAKA_PLATFORM === 'firefox' &&\n      target.nodeName === 'A' &&\n      target.target === '_blank'\n    ) {\n      // TODO: click() but prevent default\n      backgroundOpenLink('openLinkInBackgroundTab', target)\n    } else {\n      mouseEvent(target, 'click')\n    }\n    target.focus()\n    return 'Reset'\n  },\n  openLinkInBackgroundTab: (event, target) => {\n    mouseEvent(target, 'click', { ctrlKey: !isMac, metaKey: isMac })\n    if (SAKA_PLATFORM === 'firefox') {\n      backgroundOpenLink('openLinkInBackgroundTab', target)\n    }\n    target.focus()\n    return 'Reset'\n  },\n  openLinkInForegroundTab: (event, target) => {\n    mouseEvent(target, 'click', {\n      ctrlKey: !isMac,\n      metaKey: isMac,\n      shiftKey: true\n    })\n    if (SAKA_PLATFORM === 'firefox') {\n      backgroundOpenLink('openLinkInForegroundTab', target)\n    }\n    target.focus()\n    return 'Reset'\n  },\n  openLinkInNewWindow: (event, target) => {\n    mouseEvent(target, 'click', { shiftKey: true })\n    if (SAKA_PLATFORM === 'firefox') {\n      backgroundOpenLink('openLinkInNewWindow', target)\n    }\n    target.focus()\n    return 'Reset'\n  },\n  openLinkInIncognitoWindow: (event, target) => {\n    mouseEvent(target, 'click', {\n      shiftKey: true,\n      ctrlKey: !isMac,\n      metaKey: isMac\n    })\n    backgroundOpenLink('openLinkInIncognitoWindow', target)\n    target.focus()\n    return 'Reset'\n  },\n  downloadLink: (event, target) => {\n    // TODO: Implement on Firefox\n    mouseEvent(target, 'click', { altKey: true })\n    target.focus()\n    return 'Reset'\n  },\n  focusLink: (event, target) => {\n    target.focus()\n    return 'Reset'\n  }\n}\n\nfunction backgroundOpenLink (hintType, target) {\n  if (target.href) {\n    msg(1, hintType, target.href)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/client/activate.js","let detectByCursorStyle = false\n\nexport function setHintFindSettings (settings) {\n  detectByCursorStyle = settings.hintDetectByCursorStyle\n}\n\n/** @type {WeakMap<HTMLElement, CSSStyleDeclaration>} */\nlet computedStyles\n\nfunction demandComputedStyle (element) {\n  if (computedStyles.has(element)) {\n    return computedStyles.get(element)\n  } else {\n    const computedStyle = getComputedStyle(element)\n    computedStyles.set(element, computedStyle)\n    return computedStyle\n  }\n}\n\n/**\n * Finds hints\n * @param {string} hintType - the type of elements to find (currently unused)\n */\nexport function findHints (hintType) {\n  // on Firefox, getComputedStyle() may return null for conditions I don't fully understand\n  // try-catch block prevents link hints generation from breaking.\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  try {\n    // 1. getComputedStyle for every element\n    const allElements = document.querySelectorAll(hintType)\n    computedStyles = new WeakMap()\n    // allElements.forEach((element) => computedStyles.set(element, getComputedStyle(element)));\n    // 2. find hintable elements\n    const hintableElements = []\n    allElements.forEach(element => {\n      if (isClickable(element)) {\n        const rect = firstVisibleRect(element)\n        if (rect) {\n          const computedStyle = demandComputedStyle(element)\n          hintableElements.push({\n            element,\n            rect: removeRectPaddingAndBorders(element, rect, computedStyle),\n            computedStyle\n          })\n        }\n      }\n    })\n    computedStyles = undefined\n    if (SAKA_DEBUG) console.log(hintableElements)\n    return hintableElements\n  } catch (e) {\n    return []\n  }\n}\n\n// based on https://github.com/guyht/vimari/blob/master/vimari.safariextension/linkHints.js\nfunction isClickable (element, computedStyle) {\n  // clickable html elements\n  switch (element.nodeName) {\n    case 'A':\n    case 'BUTTON':\n    case 'SELECT':\n    case 'TEXTAREA':\n      return true\n    case 'INPUT':\n      return element.type !== 'hidden'\n  }\n  // ARIA roles implying clickability\n  switch (element.getAttribute('role')) {\n    case 'button':\n    case 'checkbox':\n    case 'combobox':\n    case 'link':\n    case 'menuitem':\n    case 'menuitemcheckbox':\n    case 'menuitemradio':\n    case 'radio':\n    case 'tab':\n    case 'textbox':\n      return true\n  }\n  // other clickable conditions\n  if (element.hasAttribute('onclick')) return true\n  if (detectByCursorStyle) {\n    const computedStyle = demandComputedStyle(element)\n    if (\n      computedStyle.cursor === 'pointer' &&\n      (!element.parentElement ||\n        demandComputedStyle(element.parentElement).cursor !== 'pointer')\n    ) {\n      return true\n    }\n  }\n  return false\n}\n\n// based on https://github.com/guyht/vimari/blob/master/vimari.safariextension/linkHints.js\nfunction isVisible (element, clientRect) {\n  const computedStyle = demandComputedStyle(element)\n  // remove elements that are barely within the viewport, tiny, or invisible\n  switch (true) {\n    case !clientRect:\n    case clientRect.top < 0:\n    case clientRect.top >= innerHeight - 4:\n    case clientRect.left < 0:\n    case clientRect.left >= innerWidth - 4:\n    case clientRect.width < 3:\n    case clientRect.height < 3:\n    case computedStyle.visibility !== 'visible':\n    case computedStyle.display === 'none':\n      return false\n  }\n\n  // Eliminate elements hidden by another overlapping element.\n  // To do that, get topmost element at some offset from upper-left corner of clientRect\n  // and check whether it is the element itself or one of its descendants.\n  // The offset is needed to account for coordinates truncation and elements with rounded borders.\n  //\n  // Coordinates truncation occcurs when using zoom. In that case, clientRect coords should be float,\n  // but we get integers instead. That makes so that elementFromPoint(clientRect.left, clientRect.top)\n  // sometimes returns an element different from the one clientRect was obtained from.\n  // So we introduce an offset to make sure elementFromPoint hits the right element.\n  //\n  // For elements with a rounded topleft border, the upper left corner lies outside the element.\n  // Then, we need an offset to get to the point nearest to the upper left corner, but within border.\n  const coordTruncationOffset = 2 // A value of 1 has been observed not to be enough,\n  // so we heuristically choose 2, which seems to work well.\n  // We know a value of 2 is still safe (lies within the element) because,\n  // from the code above, widht & height are >= 3.\n  const radius = parseFloat(computedStyle.borderTopLeftRadius)\n  const roundedBorderOffset = Math.ceil(radius * (1 - Math.sin(Math.PI / 4)))\n  const offset = Math.max(coordTruncationOffset, roundedBorderOffset)\n  if (offset >= clientRect.width || offset >= clientRect.height) {\n    return false\n  }\n  let el = document.elementFromPoint(\n    clientRect.left + offset,\n    clientRect.top + offset\n  )\n  while (el && el !== element) {\n    el = el.parentNode\n  }\n  if (!el) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Given an element, returns its first bounding rectangle, if any.\n * Inline elements can have multiple bounding rectangles,\n * e.g. a paragraph that wraps to the next line.\n * @param {HTMLElement} element\n * @returns {rect?: ClientRect}\n */\nfunction firstVisibleRect (element) {\n  // Case 1. the element itself is visible\n  for (const rect of element.getClientRects()) {\n    if (isVisible(element, rect)) {\n      return rect\n    }\n  }\n  // Case 2. a child of the element is visible\n  for (const child of element.children) {\n    const childRect = firstVisibleRect(child)\n    if (childRect) {\n      return childRect\n    }\n  }\n  // Case 3. there is no bounding rectangle\n  return undefined\n}\n\n/**\n * Given an element, its ClientRect, and its computed style,\n * returns a ClientRect with padding and borders removed\n * @param {HTMLElement} element\n * @param {ClientRect} rect\n * @param {CSSStyleDeclaration} computedStyle\n * @returns {ClientRect}\n */\nfunction removeRectPaddingAndBorders (element, rect, computedStyle) {\n  const left =\n    rect.left +\n    parseFloat(computedStyle.paddingLeft) +\n    parseFloat(computedStyle.borderLeftWidth)\n  const right =\n    rect.right -\n    parseFloat(computedStyle.paddingRight) -\n    parseFloat(computedStyle.borderRightWidth)\n  const top =\n    rect.top +\n    parseFloat(computedStyle.paddingTop) +\n    parseFloat(computedStyle.borderTopWidth)\n  const bottom =\n    rect.bottom -\n    parseFloat(computedStyle.paddingBottom) -\n    parseFloat(computedStyle.borderBottomWidth)\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width: right - left,\n    height: bottom - top\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/client/findHints.js","import { Component, render, h } from 'preact'\nimport { guiRoot } from 'client/gui'\nimport { activate } from './activate'\n\nexport let showHints\nexport let hideHints\nexport let advanceHints\n\nlet fontSize\nlet useTargetSize\nlet horizontalPlacement\nlet verticalPlacement\n\nexport function setHintRenderSettings ({\n  hintFontSize,\n  hintUseTargetSize,\n  hintCSS,\n  hintNormalCharCSS,\n  hintActiveCharCSS,\n  hintHorizontalPlacement,\n  hintVerticalPlacement\n}) {\n  fontSize = hintFontSize\n  horizontalPlacement = hintHorizontalPlacement\n  verticalPlacement = hintVerticalPlacement\n  useTargetSize = hintUseTargetSize\n  hintStyle.textContent = `\n@font-face {\n  font-family: Roboto; -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased;\n  font-style: normal; font-weight: normal; src: url(${chrome.runtime.getURL(\n    'Roboto-Regular.tff'\n  )}) format('tff');\n}\n.saka-hint-body {\n  ${hintCSS}\n}\n.saka-hint-normal-char {\n  ${hintNormalCharCSS}\n}\n.saka-hint-active-char {\n  ${hintActiveCharCSS}\n}`\n}\n\nclass HintRenderer extends Component {\n  constructor () {\n    super()\n    this.state = {\n      hints: [],\n      filteredHints: [],\n      inputKeys: []\n    }\n  }\n  componentDidMount () {\n    showHints = (hints, hintStrings) => {\n      const labeledHints = hints.map((hint, i) =>\n        Object.assign(hint, { hintString: hintStrings[i] })\n      )\n      this.setState({\n        hints: labeledHints,\n        filteredHints: labeledHints,\n        inputKeys: ''\n      })\n    }\n    advanceHints = event => {\n      const hints = this.state.hints\n      const inputKeys = this.state.inputKeys + event.key\n      const filteredHints = this.state.hints.filter(hint => {\n        return hint.hintString.startsWith(inputKeys)\n      })\n      this.setState({\n        hints,\n        filteredHints,\n        inputKeys\n      })\n      return filteredHints.length === 1 &&\n      inputKeys === filteredHints[0].hintString\n        ? activate(event, filteredHints[0].element)\n        : filteredHints.length === 0 ? 'Filtered' : 'Same'\n    }\n    hideHints = () => {\n      this.setState({\n        hints: [],\n        filteredHints: [],\n        inputKeys: ''\n      })\n    }\n  }\n  render () {\n    return (\n      <div style={{ position: 'absolute', left: '0', top: '0' }}>\n        {this.state.filteredHints.map(hint => (\n          <Hint\n            hintString={hint.hintString}\n            rect={hint.rect}\n            computedStyle={hint.computedStyle}\n            horizontalPlacement={horizontalPlacement}\n            verticalPlacement={verticalPlacement}\n            seen={this.state.inputKeys.length}\n          />\n        ))}\n      </div>\n    )\n  }\n}\n\nfunction generateFontSize (computedStyle) {\n  const computedFontSize = parseFloat(computedStyle.fontSize)\n  return useTargetSize && computedFontSize > 5 ? computedFontSize : fontSize\n}\n\nconst Hint = ({\n  hintString,\n  rect,\n  computedStyle,\n  horizontalPlacement,\n  verticalPlacement,\n  seen\n}) => (\n  <div\n    className='saka-hint-body'\n    style={{\n      left: `${horizontalPlacement === 'left'\n        ? window.scrollX + rect.left\n        : horizontalPlacement === 'right'\n          ? window.scrollX + rect.left + rect.width\n          : window.scrollX + rect.left + rect.width / 2}px`,\n      top: `${verticalPlacement === 'top'\n        ? window.scrollY + rect.top\n        : verticalPlacement === 'bottom'\n          ? window.scrollY + rect.top + rect.height\n          : window.scrollY + rect.top + rect.height / 2}px`,\n      fontSize: generateFontSize(computedStyle)\n    }}\n  >\n    {hintString\n      .split('')\n      .map((char, i) => (\n        <span\n          className={\n            i >= seen ? 'saka-hint-normal-char' : 'saka-hint-active-char'\n          }\n        >\n          {char}\n        </span>\n      ))}\n  </div>\n)\n\nconst hostElement = document.createElement('div')\nguiRoot.appendChild(hostElement)\nconst hintContainer =\n  SAKA_PLATFORM === 'chrome'\n    ? hostElement.attachShadow({ mode: 'open' })\n    : hostElement.appendChild(document.createElement('div'))\nconst hintStyle = document.createElement('style')\nhintContainer.appendChild(hintStyle)\nrender(<HintRenderer />, hintContainer)\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/client/HintRenderer.js","import { mouseEvent } from 'lib/dom'\n\nlet timers = []\n\n/**\n * Repeatedly issues hover events to video elements so that their controls\n * stay shown\n */\nexport function showVideoControls () {\n  document.querySelectorAll('video').forEach(video => {\n    // TODO: come up with a fix for youtube and netflix so that controlss\n    // consistently appear when link hints are rendered, esp. in fullscreen\n\n    // const rect = video.getBoundingClientRect();\n    // const bottomBar = document.elementFromPoint(\n    //   rect.left + rect.width / 2, rect.top + rect.height - 10\n    // );\n    // console.log('bottomBar', bottomBar);\n\n    mouseEvent(video, 'hover')\n    timers.push(setInterval(() => mouseEvent(video, 'hover'), 200))\n  })\n}\n\n/**\n * Cleans up hover event dispatchers from showVideoControls()\n */\nexport function hideVideoControls () {\n  timers.forEach(timer => clearInterval(timer))\n  timers = []\n  document.querySelectorAll('video').forEach(video => {\n    mouseEvent(video, 'unhover')\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/client/video.js","import { msg } from 'mosi/client'\nimport { configureActivate, activate } from './activate'\nimport { findHints, setHintFindSettings } from './findHints'\nimport {\n  showHints,\n  hideHints,\n  advanceHints,\n  setHintRenderSettings\n} from './HintRenderer'\nimport { showVideoControls, hideVideoControls } from './video'\nimport { isModifierKey, simplify } from 'lib/keys'\n\nlet hints\nexport let activator\n\nexport default {\n  onExit: event => {\n    hideHints()\n    hideVideoControls()\n  },\n  onOptionsChange: options => {\n    setHintRenderSettings(options)\n    setHintFindSettings(options)\n  },\n  keydown: event => {\n    event.stopImmediatePropagation()\n    event.preventDefault()\n    if (!isModifierKey(event)) {\n      msg(1, 'processKey', simplify(event))\n    }\n    return 'Same'\n  },\n  keypress: event => {\n    event.stopImmediatePropagation()\n    return 'Same'\n  },\n  focus: () => 'TryText',\n  mousedown: () => (SAKA_DEBUG ? 'Same' : 'Reset'),\n  messages: {\n    findHints: ({ filter, activate }) => {\n      showVideoControls()\n      configureActivate(activate)\n      hints = findHints(filter)\n      return {\n        nextMode: 'Hints',\n        value: hints.length\n      }\n    },\n    renderHints: hintStrings => {\n      showHints(hints, hintStrings)\n      hints = undefined\n    },\n    exitHintsMode: (nextMode = 'Reset') => ({ nextMode }),\n    advanceHints: event => {\n      const status = advanceHints(event)\n      return {\n        nextMode: 'Same',\n        value: status\n      }\n    },\n    activateFirstHint: () => {\n      const status = activate({}, hints[0].element)\n      return {\n        nextMode: 'Same',\n        value: status\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/client/index.js","/**\n * A Trie datastructure that uses a simple javascript object for its underlying storage.\n * It doesn't generate the input tree for you, you MUST generate it yourself.\n * This trie is designed for Saka Key's needs and ISN'T general purpose.\n * An example input tree is:\n * {\n *   \"c\": {\n *     \"a\": {\n *       \"t\": \"Tom\",\n *       \"r\": \"Tarzan\"\n *     }\n *   },\n *   \"d\": {\n *     \"o\": {\n *       \"g\": () => console.log(\"My dog's name is Harris\")\n *     }\n *   }\n * }\n */\nexport default class Trie {\n  /**\n   * Creates a trie\n   * @param {Object} root - A simple javascript object representing a trie\n   */\n  init = root => {\n    this.root = root\n    this.curNode = root\n  }\n  /** Sets the root to current node to the root node */\n  reset = () => {\n    this.curNode = this.root\n  }\n  static INTERNAL = Symbol('INTERNAL')\n  static INVALID = Symbol('INVALID')\n  /**\n   * Advances the command trie based on the input string. In Saka Key, this\n   * input string is usually the string representation of a keyboard event\n   * @param {string} input\n   */\n  advance = input => {\n    const next = this.curNode[input]\n    switch (typeof next) {\n      case 'undefined':\n        this.curNode = this.root\n        return this.root[input] === undefined\n          ? Trie.INVALID\n          : this.advance(input)\n      case 'object':\n        this.curNode = next\n        return Trie.INTERNAL\n      default:\n        this.curNode = this.root\n        return next\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/trie.js","import { background } from 'lib/msg'\n\nexport const openLink = background('findHints', {\n  filter: '*',\n  activate: 'openLink'\n})\nexport const openLinkInBackgroundTab = background('findHints', {\n  filter: '*',\n  activate: 'openLinkInBackgroundTab'\n})\nexport const openLinkInForegroundTab = background('findHints', {\n  filter: '*',\n  activate: 'openLinkInForegroundTab'\n})\nexport const openLinkInNewWindow = background('findHints', {\n  filter: '*',\n  activate: 'openLinkInNewWindow'\n})\nexport const openLinkInIncognitoWindow = background('findHints', {\n  filter: '*',\n  activate: 'openLinkInIncognitoWindow'\n})\nexport const downloadLink = background('findHints', {\n  filter: '*',\n  activate: 'downloadLink'\n})\nexport const focusLink = background('findHints', {\n  filter: '*',\n  activate: 'focusLink'\n})\nexport const focusInput = background('findHints', {\n  filter:\n    'input:not([type=submit]):not([type=button]):not([type=reset]):not([type=file]), textarea, select',\n  activate: 'openLink'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/hint.js","import { background } from 'lib/msg'\n\nexport const previousTab = background('previousTab')\nexport const nextTab = background('nextTab')\nexport const firstTab = background('firstTab')\nexport const lastTab = background('lastTab')\nexport const moveTabLeft = background('moveTabLeft')\nexport const moveTabRight = background('moveTabRight')\nexport const moveTabFirst = background('moveTabFirst')\nexport const moveTabLast = background('moveTabLast')\nexport const closeTab = background('closeTab')\nexport const closeOtherTabs = background('closeOtherTabs')\nexport const closeRightTabs = background('closeRightTabs')\nexport const closeLeftTabs = background('closeLeftTabs')\nexport const newTab = background('newTab')\nexport const restoreTab = background('restoreTab')\nexport const duplicateTab = background('duplicateTab')\nexport const newWindow = background('newWindow')\nexport const newIncognitoWindow = background('newIncognitoWindow')\nexport const switchWindow = background('switchWindow')\nexport const zoomIn = background('zoomIn')\nexport const zoomOut = background('zoomOut')\nexport const zoomReset = background('zoomReset')\nexport const refreshTab = background('refreshTab')\nexport const refreshAllTabs = background('refreshAllTabs')\nexport const hardRefreshTab = background('hardRefreshTab')\nexport const toggleMuteTab = background('toggleMuteTab')\nexport const toggleMuteAllTabs = background('toggleMuteAllTabs')\nexport const togglePinTab = background('togglePinTab')\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/tab.js","import { copy } from 'lib/dom'\nimport { background } from 'lib/msg'\n\nexport const copyURL = () => {\n  copy(document.location.href)\n}\nexport const clipboardCurrentTab = background('clipboardCurrentTab')\nexport const clipboardBackgroundTab = background('clipboardBackgroundTab')\nexport const clipboardForegroundTab = background('clipboardForegroundTab')\nexport const clipboardNewWindow = background('clipboardNewWindow')\nexport const clipboardIncognitoWindow = background('clipboardIncognitoWindow')\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/client/commands/clipboard.js","export default {\n  keydown: event => {\n    if (event.key === 'Escape') {\n      document.activeElement.blur()\n    }\n    // firefox doesn't fire blur events if the active element is removed from\n    // the DOM or its style is set to none. The following is hacky workaround\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=559561\n    // TODO: return 'Same' on all platforms when firefox fixes the bug\n    return SAKA_PLATFORM === 'firefox' ? 'Reset' : 'Same'\n  },\n  blur: () => 'Reset',\n  focus: () => 'Reset'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/text/client.js","import { init, msg } from 'mosi/client'\nimport {\n  initModes,\n  addEventListeners,\n  removeEventListeners,\n  changeMode,\n  clientOptions\n} from './modes'\nimport Disabled from 'modes/disabled/client'\nimport Command from 'modes/command/client'\nimport Pass from 'modes/pass/client'\nimport Text from 'modes/text/client'\nimport Hints from 'modes/hints/client'\n\n/**\n * Initializes a Saka key client, making keyboard shortcuts available.\n * Specify the type of client:\n * * 'cs' - for content scripts\n * * 'popup' - for the popup\n * * 'options' - for options\n * @param {string} type - the type of client\n */\nexport function initialize (type, otherActions = {}) {\n  if (SAKA_DEBUG) {\n    console.log(`${type} client loaded for version ${SAKA_VERSION}`)\n  }\n\n  const actions = {\n    ...otherActions,\n    changeMode,\n    clientOptions\n  }\n\n  addEventListeners(type)\n\n  // Initialize the messaging system\n  init({\n    log: SAKA_DEBUG,\n    subscriptions: ['client', type],\n    actions,\n    onClientDisconnect: removeEventListeners\n  })\n\n  msg(1, 'clientOptions')\n\n  initModes(\n    'Disabled',\n    {\n      Disabled,\n      Command,\n      Pass,\n      Text,\n      Hints\n    },\n    actions\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/index.js","/*\n * smoothscroll polyfill - v0.3.5\n * https://iamdustan.github.io/smoothscroll\n * 2016 (c) Dustan Kasten, Jeremias Menichelli - MIT License\n */\n\n(function(w, d, undefined) {\n  'use strict';\n\n  /*\n   * aliases\n   * w: window global object\n   * d: document\n   * undefined: undefined\n   */\n\n  // polyfill\n  function polyfill() {\n    // return when scrollBehavior interface is supported\n    if ('scrollBehavior' in d.documentElement.style) {\n      return;\n    }\n\n    /*\n     * globals\n     */\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    /*\n     * object gathering original scroll methods\n     */\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    /*\n     * define timing method\n     */\n    var now = w.performance && w.performance.now\n      ? w.performance.now.bind(w.performance) : Date.now;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} x\n     * @returns {Boolean}\n     */\n    function shouldBailOut(x) {\n      if (typeof x !== 'object'\n            || x === null\n            || x.behavior === undefined\n            || x.behavior === 'auto'\n            || x.behavior === 'instant') {\n        // first arg not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof x === 'object'\n            && x.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError('behavior not valid');\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      var isBody;\n      var hasScrollableSpace;\n      var hasVisibleOverflow;\n\n      do {\n        el = el.parentNode;\n\n        // set condition variables\n        isBody = el === d.body;\n        hasScrollableSpace =\n          el.clientHeight < el.scrollHeight ||\n          el.clientWidth < el.scrollWidth;\n        hasVisibleOverflow =\n          w.getComputedStyle(el, null).overflow === 'visible';\n      } while (!isBody && !(hasScrollableSpace && !hasVisibleOverflow));\n\n      isBody = hasScrollableSpace = hasVisibleOverflow = null;\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    /*\n     * ORIGINAL METHODS OVERRIDES\n     */\n\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scroll.call(\n          w,\n          arguments[0].left || arguments[0],\n          arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left,\n        ~~arguments[0].top\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left || arguments[0],\n          arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.elScroll.call(\n            this,\n            arguments[0].left || arguments[0],\n            arguments[0].top || arguments[1]\n        );\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n          this,\n          this,\n          typeof left === 'number' ? left : this.scrollLeft,\n          typeof top === 'number' ? top : this.scrollTop\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      var arg0 = arguments[0];\n\n      if (typeof arg0 === 'object') {\n        this.scroll({\n          left: arg0.left + this.scrollLeft,\n          top: arg0.top + this.scrollTop,\n          behavior: arg0.behavior\n        });\n      } else {\n        this.scroll(\n          this.scrollLeft + arg0,\n          this.scrollTop + arguments[1]\n        );\n      }\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n        // reveal parent in viewport\n        w.scrollBy({\n          left: parentRects.left,\n          top: parentRects.top,\n          behavior: 'smooth'\n        });\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n})(window, document);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/smoothscroll-polyfill/dist/smoothscroll.js\n// module id = 14\n// module chunks = 0 1 2 4","import { initialize } from 'client'\n\ninitialize('content_script')\n\n\n\n// WEBPACK FOOTER //\n// ./src/content_script/index.js"],"sourceRoot":""}